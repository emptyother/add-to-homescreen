<!DOCTYPE html>
<html lang="en-US" class="no-js">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Add to home screen &#8211; Matteo Spinelli&#039;s Cubiq.org</title>
		<style type="text/css">
			img.wp-smiley,
			img.emoji {
				display: inline !important;
				border: none !important;
				box-shadow: none !important;
				height: 1em !important;
				width: 1em !important;
				margin: 0 .07em !important;
				vertical-align: -0.1em !important;
				background: none !important;
				padding: 0 !important;
			}

		</style>
	</head>
	<body class="post-template-default single single-post postid-116 single-format-standard">
		<div id="page" class="site">
			<div class="site-inner">
				<a class="skip-link screen-reader-text" href="#content">Skip to content</a>
				<header id="masthead" class="site-header" role="banner">
					<div class="site-header-main">
						<div class="site-branding">
							<p class="site-title">
								<a href="https://web.archive.org/web/20180510153249/http://cubiq.org/" rel="home">Matteo Spinelli&#039;s Cubiq.org</a>
							</p>
							<p class="site-description">Geek since before it was cool</p>
						</div>
						<button id="menu-toggle" class="menu-toggle">Menu</button>
						<div id="site-header-menu" class="site-header-menu">
							<nav id="site-navigation" class="main-navigation" role="navigation" aria-label="Primary Menu">
								<div class="menu-main-container">
									<ul id="menu-main" class="primary-menu">
										<li id="menu-item-372" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-372"><a href="https://web.archive.org/web/20180510153249/http://cubiq.org/about">About me</a></li>
										<li id="menu-item-370" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-370"><a href="https://web.archive.org/web/20180510153249/http://cubiq.org/hire-me">Hire me</a></li>
										<li id="menu-item-371" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-371"><a href="https://web.archive.org/web/20180510153249/http://cubiq.org/contact">Contact me</a></li>
										<li id="menu-item-373" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-373"><a href="https://web.archive.org/web/20180510153249/http://cubiq.org/category/projects">Projects</a></li>
									</ul>
								</div>
							</nav><!-- .main-navigation -->
						</div><!-- .site-header-menu -->
					</div><!-- .site-header-main -->
				</header><!-- .site-header -->
				<div id="content" class="site-content">
					<div id="primary" class="content-area">
						<main id="main" class="site-main" role="main">
							<article id="post-116" class="post-116 post type-post status-publish format-standard has-post-thumbnail hentry category-projects tag-ios">
								<header class="entry-header">
									<h1 class="entry-title">Add to home screen</h1>
								</header><!-- .entry-header -->
								<div class="entry-summary">
									<p>Add To Homescreen (ATH) is a javascript widget that opens an overlaying message inviting the user to add the web site/application to the home screen. This was born mainly to support <strong>web-app-capable</strong> applications but extended to a more general purpose use case.</p>
								</div><!-- .entry-summary -->
								<div class="post-thumbnail">
								</div><!-- .post-thumbnail -->
								<div class="entry-content">
									<ul id="console">
										<li><a href="https://web.archive.org/web/20180510153249/https://github.com/cubiq/add-to-homescreen/zipball/master" class="download">Get the Script</a></li>
										<li><a href="https://web.archive.org/web/20180510153249/http://lab.cubiq.org/addtohome/demos/simple" class="demo">Live Demo</a></li>
										<li><a href="https://web.archive.org/web/20180510153249/https://github.com/cubiq/add-to-homescreen" class="repo">GitHub</a></li>
									</ul>
									<h3>Support Development</h3>
									<p>Add To Homescreen is a free, open source javascript software. It is released under the <a href="https://web.archive.org/web/20180510153249/http://cubiq.org/license">MIT License</a> which basically grants you complete freedom in usage for open source and commercial applications.</p>
									<p>That being said the only way for me to subtract hours from my day work and keep implementing this script is through donations. If you find this widget useful and wish to support future development, please consider a donation.</p>
									<form action="https://web.archive.org/web/20180510153249/https://www.paypal.com/cgi-bin/webscr" method="post" style="margin-bottom:20px;margin-top:-25px">
										<input type="hidden" name="cmd" value="_s-xclick"><br />
										<input type="hidden" name="hosted_button_id" value="LQR5A36HGDVTC"><br />
										<input type="image" src="https://web.archive.org/web/20180510153249im_/http://cubiq.org/dropbox/donate-paypal3.png" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!"><br />
									</form>
									<h3>Overview</h3>
									<p>The script opens an always-on-top message inviting the user to add the application to the home screen. This is currently supported on iOS and Mobile Chrome. While other devices have the ability to bookmark any website to the home screen, only iOS and Mobile Chrome have a straightforward way to do it. ATH would technically also work on Windows Phone (which has the equivalent <em>Pin to Start</em> option), but I&#8217;m not currently able to test it on that device. WinPhone support might be added in a future release if there will be enough interest.</p>
									<p>ATH by default looks something like this</p>
									<p><img src="https://web.archive.org/web/20180510153249im_/http://static.cubiq.org/uploads/2011/01/ath-preview.png" alt="ath-preview" width="400" height="242" class="size-full wp-image-294" /></p>
									<p>But appearance is customizable with plain old CSS.</p>
									<p>The script is compatible with iOS 6+ and Chrome 31+. It would be possible to add iOS5 (and older) support, but considering the iOS7 penetration I decided to support the latest two releases only. If there&#8217;s really interest in older versions I might reintroduce &lt;iOS5 support or you could use the <a href="https://web.archive.org/web/20180510153249/https://github.com/cubiq/add-to-homescreen/tree/v2">previous version</a> of ATH (which supports iOS3 and up).</p>
									<h3>Languages</h3>
									<p>The message changed in v3 so unfortunately all the languages supported in v2 are not available anymore. <strong>If you wish to help please send more translations</strong>!</p>
									<h3>Basic Usage</h3>
									<p>v3 API changed drastically (sorry about that) and it&#8217;s not a drop in replacement for v2. The good news is that v3 is aware of user sessions saved on previous ATH versions, so if the users have already seen the message, it won&#8217;t be displayed again.</p>
									<p>The easiest way to use ATH is to link the script into your document <code>HEAD</code> and call the <code>addToHomescreen()</code> function as soon as possible. Eg:</p>
									<pre>
&lt;head&gt;
&lt;title&gt;Add To Home&lt;/title&gt;
...
&lt;link rel="stylesheet" type="text/css" href="../../style/addtohomescreen.css"&gt;
&lt;script src="../../src/addtohomescreen.js"&gt;&lt;/script&gt;
&lt;script&gt;
addToHomescreen();
&lt;/script&gt;
&lt;/head&gt;
</pre>
									<p>That&#8217;s all you need. ATH automatically hooks to the onload event, checks device compatibility, detects if the app is already in full screen mode and eventually pops up the message.</p>
									<p>It is not strictly needed to place the script in the document <code>HEAD</code> (you can also place it at the end of your <code>BODY</code>), but ATH makes a series of checks that are better done sooner than later.</p>
									<h3>Options</h3>
									<p>ATH accepts one option parameter to customize the script behavior.</p>
									<p>To change the start up delay for example you could use the <code>startDelay</code> option.</p>
									<pre>
addToHomescreen({
   startDelay: 5
});
</pre>
									<p>This would delay 5 seconds before showing the message.</p>
									<p>Below the most common options.</p>
									<ul>
										<li><strong>modal</strong>: prevents further actions on the website until the message is closed.</li>
										<li><strong>mandatory</strong>: the website is not accessible until the user adds the application to the homescreen. This is useful mainly for <code>web-app-capable</code> applications that need full screen viewing to be accessed (eg: games).</li>
										<li><strong>skipFirstVisit</strong>: setting this to <code>true</code> prevents the message to appear the first time the user visits your website. It is highly recommended to enable this option!</li>
										<li><strong>startDelay</strong>: seconds to wait from page load before showing the message. Default: 1.</li>
										<li><strong>lifespan</strong>: seconds to wait before automatically close the message. Default: 15 (set to 0 to disable automatic removal).</li>
										<li><strong>displayPace</strong>: minutes before the message is shown again. By default it&#8217;s set to 1440, meaning that we will be showing the message only once per day.</li>
										<li><strong>maxDisplayCount</strong>: absolute maxium number of times the call out will be shown. (0 = no limit).</li>
										<li><strong>icon</strong>: display the touch icon in the pop up message. Default: true</li>
										<li><strong>message</strong>: you can provide your custom message if you don&#8217;t like the default.</li>
										<li><strong>onShow</strong>: custom function executed when the message is shown.</li>
										<li><strong>onAdd</strong>: custom function executed when the application is added to the homescreen. Please note that this is a guesstimate (see below).</li>
										<li><strong>detectHomescreen</strong>: ATH tries to detect the homescreen. Supported values are: false, true (=&#8217;hash&#8217;), &#8216;hash&#8217;, &#8216;queryString&#8217;, &#8216;smartURL&#8217; (see below).</li>
										<li><strong>autostart</strong>: the message is not shown automatically and you have to trigger it programmatically.</li>
									</ul>
									<h3>Detect the homescreen</h3>
									<p><strong>There&#8217;s no native event we could hook to to know when a user actually adds the page to the homescreen</strong>. That&#8217;s also the reason why this script has become so complicated despite the apparent simple task it has to accomplish.</p>
									<p>ATH development started when Apple introduced the <code>apple-mobile-web-app-capable</code> meta tag and stand alone mode with it. When the webapp is in <em>stand alone</em> mode the <code>window.navigator.standalone</code> property is set to <code>true</code> and that&#8217;s the only 100% safe way to know if the app has been added to the homescreen&#8230; With some caveats (of course).</p>
									<pre>
// set a web app capable website
&lt;meta name="apple-mobile-web-app-capable" content="yes"&gt;
&lt;meta name="mobile-web-app-capable" content="yes"&gt;
</pre>
									<p>Standalone mode is meant for web applications, not &#8220;standard&#8221; web sites. The webapp has to be designed with standalone mode in mind, for example links inside your fullscreen app will open in a new browser window hence your app navigation has to be handled with JS.</p>
									<p>Also, as of this writing Chrome &#8211;despite support for <code>mobile-web-app-capable</code>&#8212; doesn&#8217;t fill the <code>window.navigator.standalone</code> property, making it an unreliable way to detect if the app has been added.</p>
									<p>So, how can we detect if the app has been actually added to the home screen? ATH tries its best to help you in this hard task and the followings are your options.</p>
									<ul>
										<li><strong>Show the callout only once per user</strong>. This is the best, safest and most polite solution of all. Set the <code>maxDisplayCount</code> to 1 and the user will be presented with the nasty callout only one time, smartly circumventing the problem.</li>
										<li><strong>Build a standalone application</strong>. When possible try to use <code>apple-mobile-web-app-capable</code>.</li>
										<li><strong>Add a special token in the URL and have the user bookmark the tokenized address</strong>. ATH supports hash, query string or smart url tokens. Continue reading for details.</li>
									</ul>
									<p>I strongly suggest to go with the first option and show the callout only once. That&#8217;s the safest solution, but if you want to be more aggressive you can take the &#8220;token&#8221; route.</p>
									<p>First of all you have to choose where to place the token. ATH offers three options:</p>
									<ul>
										<li><strong>hash</strong>: http://www.example.com/#ath</li>
										<li><strong>query string</strong>: http://www.example.com/?ath=</li>
										<li><strong>smart url</strong>: http://www.example.com/ath/</li>
									</ul>
									<p>As soon as the page is loaded ATH adds the token to the page URL (no worries, no reload will happen as we use <code>history.replaceState</code>). If the user adds the page to the homescreen the actual URL that will be saved contains the token. If the page already contains the token before ATH could add it, it means that (most likely) the page has been added to the homescreen.</p>
									<p>Bear in mind that this is a guesstimate, there are some exceptions but the good news is that it should be pretty rare to have false positive, ie: it should never happen to see the popup after the app has been added. Instead it may happen to have ATH think that the app has been added even if it hasn&#8217;t.</p>
									<p>Be careful when using the <code>detectHomescreen</code> option since it may interfere with your application especially if you already use <code>#hash</code> or <code>history.replaceState</code> for your navigation.</p>
									<h3>Optimal configuration</h3>
									<p>Do not annoy your users with frequent callouts the suggested setup is to show the message only once, the second time the user visits your website.</p>
									<pre>
addToHomescreen({
   skipFirstVisit: true,
   maxDisplayCount: 1
});
</pre>
									<p>The above config skips the first time the user comes to your site, so she has time to look around freely. The next time she will be greeted by the cheerful balloon and from that moment on she won&#8217;t be bothered again.</p>
									<h3>Debug mode</h3>
									<p>ATH v3 also introduces debug mode. By setting <code>debug: true</code> some of the preliminary checks are skipped and the message is shown on desktop browsers and unsupported devices as well.</p>
									<p>You also have the <code>addToHomescreen.removeSession()</code> function in your tool belt, which clears the current session. This is very useful when testing various options and the callout seems not to be willing to show up again. This is common because ATH is very conservative, to avoid showing the message by mistake it tries to show it the less as possible.</p>
									<h3>Open the pop up programmatically</h3>
									<p>Of course you can bypass the automatic triggering and open the call out programmatically. To do so you have to set the <code>autostart: false</code> option.</p>
									<pre>
var addtohome = addToHomescreen({
   autostart: false
});
addtohome.show();
</pre>
									<p><code>addToHomescreen()</code> it&#8217;s a kind of singleton and returns the instance to the real AddToHomescreen class. From there you have access to the <code>show()</code> method. Note that no checks are performed to verify if the DOM is ready, if you show the message programmatically that&#8217;s up to you.</p>
									<p><code>show()</code> also supports one boolean option. If you pass <code>true</code> the callout is shown no matter what overriding most of the preliminary tests.</p>
									<h3>localStorage variable name</h3>
									<p>The user session is stored in a localStorage variable called <code>org.cubiq.addtohome</code> by default. localStorage is domain based, so if you have multiple applications on the same domain ATH can&#8217;t understand which one you actually added to the homescreen.</p>
									<p>You can have multiple instances of ATH on the same domain by setting a different <code>appID</code> for each installation. Eg:</p>
									<pre>
addToHomescreen({
   appID: 'org.cubiq.myCoolApp'
});
</pre>
									<p><strong>IMPORTANT:</strong> once set do not change the appID! If you change the appID all users will see the callout again regardless if they already added the application to the home screen or not. Only exception is for standalone applications. They would keep working correctly anyway.</p>
									<h3>apple-mobile-web-app-title</h3>
									<p>From iOS6 you have a handy meta tag called <code>apple-mobile-web-app-title</code> that holds the name that will be displayed on the homescreen, otherwise the page title will be used. Since the app name is limited to 11 characters you may want to take advantage of this feature.</p>
								</div><!-- .entry-content -->
								<footer class="entry-footer">
									<span class="byline"><span class="author vcard"><img alt="" src="https://web.archive.org/web/20180510153249im_/http://1.gravatar.com/avatar/7f6a5eb2b362a675dea2f8fc042bffef?s=49&amp;d=mm&amp;r=pg" srcset="https://web.archive.org/web/20180510153249im_/http://1.gravatar.com/avatar/7f6a5eb2b362a675dea2f8fc042bffef?s=98&amp;d=mm&amp;r=pg 2x" class="avatar avatar-49 photo" height="49" width="49" /><span class="screen-reader-text">Author </span> <a class="url fn n" href="https://web.archive.org/web/20180510153249/http://cubiq.org/author/matteo">matteo</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="https://web.archive.org/web/20180510153249/http://cubiq.org/add-to-home-screen" rel="bookmark"><time class="entry-date published updated" datetime="2011-01-23T18:15:10+00:00">2011-01-23</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="https://web.archive.org/web/20180510153249/http://cubiq.org/category/projects" rel="category tag">Projects</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="https://web.archive.org/web/20180510153249/http://cubiq.org/tag/ios" rel="tag">iOS</a></span> </footer><!-- .entry-footer -->
							</article><!-- #post-## -->
						</main><!-- .site-main -->
					</div><!-- .content-area -->
				</div><!-- .site-content -->
			</div><!-- .site-inner -->
		</div><!-- .site -->
	</body>
</html>
